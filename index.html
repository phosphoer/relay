<html>
  <head>
    <script src='app.js'></script>
    <link rel='stylesheet' href='style.css' />
    <script src='ractive.js'></script>
  </head>

  <body>
    <script>
      window.addEventListener("load", main);
    </script>

    <!-- Containers -->
    <div id='channelContainer'></div>
    <div id='logContainer'></div>
    <div id='usersContainer'></div>

    <!-- User input box -->
    <input class='user-input' placeholder="Type here" type='text'></input>

    <!-- Templates -->
    <!-- Channels window template -->
    <script id='channelsTemplate' type='text/ractive'>
      <div class='channel-window'>
        {{#user.channels}}
          <div class='channel-item' on-click='activate'>
            <span class='channel-item-name'>{{name}}</span>
          </div>
        {{/user.channels}}
      </div>
    </script>

    <!-- Users window template -->
    <script id='usersTemplate' type='text/ractive'>
      <div class='users-window'>
        {{#user.currentChannel.users}}
          <div class='users-item'>
            <span class='users-item-name'>{{name}}</span>
          </div>
        {{/user.currentChannel.users}}
      </div>
    </script>

    <!-- Log window template -->
    <script id='logTemplate' type='text/ractive'>
      <div class='log-window'>
        {{#user.currentChannel.logs}}
          <div class='log-item-wrapper'>
            <div class='log-item'>
              <span class='log-item-from'>{{sender}}</span>
              <span class='log-item-message'>{{message}}</span>
              <a target="_blank" class='log-item-link' href='{{linkHref}}' style='display: {{linkDisplay}};'>{{linkHref}}</a>
              <a target="_blank" href='{{imgSrc}}' style='display: {{imgDisplay}};'><img class='log-item-image' src='{{imgSrc}}' /></a>
            </div>
          </div>
        {{/user.currentChannel.logs}}
      </div>
    </script>

    <script>
      var path = './style.css';
      var fs = require('fs');

      fs.watch(path, function()
      {
        if (location && location.reload)
        {
          require('nw.gui').Window.get().removeAllListeners('new-win-policy');
          location.reload();
        }
      });
    </script>

  </body>
</html>